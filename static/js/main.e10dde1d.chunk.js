(this["webpackJsonpchatbot-antd"]=this["webpackJsonpchatbot-antd"]||[]).push([[0],{115:function(e,t,n){e.exports=n(194)},171:function(e,t,n){},194:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),i=n.n(c),l=n(40),o=n(41),u=n(65),s=n.n(u),f=n(99),m=n(47),p=n(70),g=n(197),d=n(50),b=n.n(d),v=n(200),x=n(201),y=n(202),E=n(66),h=n.n(E),j=n(198),O=n(199),w={style:{color:"#f56a00",backgroundColor:"#fde3cf"},icon:r.a.createElement(j.a,null)},k={style:{color:"white",backgroundColor:"#87d068"},icon:r.a.createElement(O.a,null)},C={display:"flex",position:"relative"},R={width:"32px"},U={width:"calc(100% - 20px - 64px)",margin:"10px",padding:"10px"},S={left:"40px",top:"15px",color:"white"},z={right:"40px",top:"15px",color:"white"};function M(e){var t=e.isUser,n=e.text;return r.a.createElement("div",{style:C},r.a.createElement("div",{style:R},!t&&r.a.createElement(h.a,w)),r.a.createElement("div",{className:"ant-popover-arrow",style:t?z:S}),r.a.createElement("div",{className:"ant-popover-inner",style:U},r.a.createElement("span",null,n)),r.a.createElement("div",{style:R},t&&r.a.createElement(h.a,k)))}n(171);var T=n(106),B=[];var L={},N={mask:!1,style:{marginRight:0,zIndex:1e4},width:300,bodyStyle:{height:"".concat(400,"px"),overflow:"auto"},wrapClassName:"yehuozhili"},q={display:"flex",paddingBottom:"10px",marginBottom:"10px"},D={padding:0,marginRight:"10px"},I={width:"100%"},J=["image/png","image/jpeg","image/gif"];function P(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}var A=n(203);B.push({text:"\u6211\u662f\u673a\u5668\u4eba",reg:"\u4f60\u662f\u8c01"},{text:"author is yehuozhili",useReg:/(.*?)\u4f5c\u8005\u662f\u8c01(.*?)/},{text:r.a.createElement(A.a,null),useReg:/(.*?)\u8868\u60c5(.*?)/});var F=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useCallback)((function(e){setTimeout((function(){var t=function(e){if("string"===typeof e.text){var t,n=Object(T.a)(B);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.reg){if(new RegExp(a.reg).test(e.text))return a.text}else if(a.useReg&&a.useReg.test(e.text))return a.text}}catch(r){n.e(r)}finally{n.f()}return null}return null}(e);t&&h((function(e){return[].concat(Object(l.a)(e),[{isUser:!1,text:t}])}))}),500)}),[]),u=function(e,t,n,c,i,u,d){var E=Object(a.useState)(u||[]),h=Object(o.a)(E,2),j=h[0],O=h[1],w=Object(a.useState)(""),k=Object(o.a)(w,2),C=k[0],R=k[1],U=Object(a.useMemo)((function(){return Object(m.a)(Object(m.a)({},L),c)}),[c]),S=Object(a.useCallback)((function(){""!==C&&(O((function(e){return[].concat(Object(l.a)(e),[{isUser:!0,text:C}])})),R(""))}),[C]),z=Object(a.useCallback)((function(){B.current&&B.current.click()}),[]),T=function(){var e=Object(f.a)(s.a.mark((function e(t){var n,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target&&t.target.files&&t.target.files.length>0)){e.next=8;break}if(n=t.target.files[0],!((i=n).size<=5e5&&J.includes(i.type)||(console.error("invalidate file"),0))){e.next=8;break}return e.next=5,P(n);case 5:a=e.sent,c=r.a.createElement("img",{style:I,src:a,alt:"user-img"}),O((function(e){return[].concat(Object(l.a)(e),[{isUser:!0,text:c}])}));case 8:case"end":return e.stop()}var i}),e)})));return function(t){return e.apply(this,arguments)}}(),B=Object(a.useRef)(null),A=Object(a.useMemo)((function(){return d?null:r.a.createElement("div",{style:q},r.a.createElement(p.a,{title:"\u6e05\u7a7a",type:"link",onClick:function(){return O([])},style:D},r.a.createElement(v.a,null)),r.a.createElement("input",{ref:B,type:"file",accept:"image/*",style:{display:"none"},value:"",onChange:T}),r.a.createElement(p.a,{title:"\u53d1\u9001\u56fe\u7247",type:"link",onClick:function(){return z()},style:D},r.a.createElement(x.a,null)))}),[d,z]),F=Object(a.useMemo)((function(){var e=r.a.createElement("div",null,A,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(g.a,Object.assign({value:C,onChange:function(e){return R(e.target.value)},onPressEnter:S},U)),r.a.createElement(p.a,{style:{marginLeft:"5px"},onClick:S},r.a.createElement(y.a,null))));return Object(m.a)(Object(m.a)({},N),{},{footer:e},n)}),[A,U,C,n,S]);Object(a.useLayoutEffect)((function(){var e=document.querySelector(".yehuozhili");if(e){var t=e.querySelector(".ant-modal-body");if(t){var n=t.scrollHeight-400;t.scrollTop=n}}}),[j]),Object(a.useEffect)((function(){if(j.length>0&&t){var e=j[j.length-1];e.isUser&&t(e)}}),[t,j]);var H=Object(a.useMemo)((function(){return{sign:!0}}),[]);return Object(a.useEffect)((function(){var t;return H.sign&&e&&i&&(t=window.setTimeout((function(){H.sign=!1,O((function(e){return[].concat(Object(l.a)(e),[{isUser:!1,text:i}])}))}),500)),function(){return window.clearTimeout(t)}}),[H,i,e]),[r.a.createElement(b.a,Object.assign({visible:e},F),j.map((function(e,t){return r.a.createElement(M,{key:t,isUser:e.isUser,text:e.text})}))),O]}(n,i,{onOk:function(){return c(!1)},onCancel:function(){return c(!1)},title:"h5-Dooring\u673a\u5668\u4eba\u5ba2\u670d"},{},r.a.createElement("div",null,"welcome!\u6211\u662f\u673a\u5668\u4eba\u521d\u59cb\u6b22\u8fce\u8bed\u53e5\uff01\uff01")),d=Object(o.a)(u,2),E=d[0],h=d[1];return r.a.createElement("div",null,r.a.createElement("div",{style:{position:"fixed",right:"10px",top:"40%"}},r.a.createElement(p.a,{type:"primary",onClick:function(){return c(!n)}},r.a.createElement(A.a,null))),E)};i.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[115,1,2]]]);
//# sourceMappingURL=main.e10dde1d.chunk.js.map